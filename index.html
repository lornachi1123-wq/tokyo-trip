<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tokyo Travel Buddy 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'muji-beige': '#F5F5F0',
                        'muji-sand': '#E8E4D9',
                        'muji-brown': '#8C7E6D',
                        'muji-dark': '#4A4A4A',
                        'muji-accent': '#A68B6A'
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #F5F5F0; color: #4A4A4A; }
        .tab-content { display: none; }
        .active-tab { display: block; }
        .muji-card { background: white; border-radius: 1.25rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .nav-active { color: #A68B6A; }
        ::-webkit-scrollbar { width: 0px; }
        .timeline-line::before {
            content: '';
            position: absolute;
            left: 0.75rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #E8E4D9;
        }
        .img-preview { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; }
    </style>
</head>
<body class="pb-24">

    <header class="sticky top-0 z-50 bg-muji-beige/80 backdrop-blur-md px-6 py-4 flex justify-between items-center border-b border-muji-sand">
        <div>
            <h1 class="text-xl font-bold tracking-tight text-muji-brown">TOKYO TRIP</h1>
            <p class="text-xs text-gray-400">12/25 - 12/31</p>
        </div>
        <div class="text-right">
            <span id="header-date" class="text-sm font-medium"></span>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 mt-6">
        
        <section id="plan" class="tab-content active-tab">
            <div class="mb-6">
                <h2 class="text-lg font-bold mb-4 flex items-center"><i class="fa-solid fa-plane-departure mr-2"></i> 航班資訊</h2>
                <div class="muji-card p-4 flex flex-col gap-3 border-l-4 border-muji-accent">
                    <div class="flex justify-between">
                        <span class="text-sm">12/25 去程 CI108</span>
                        <span class="font-bold text-muji-brown">14:25 ➔ 18:30</span>
                    </div>
                    <div class="flex justify-between border-t border-dashed pt-2 border-muji-sand">
                        <span class="text-sm">12/31 回程 CI109</span>
                        <span class="font-bold text-muji-brown">19:30 ➔ 22:45</span>
                    </div>
                </div>
            </div>

            <div class="flex overflow-x-auto pb-4 gap-2 no-scrollbar mb-4">
                <button onclick="showDay(1)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-sm font-medium active shadow-sm bg-muji-accent text-white" id="day-btn-1">D1</button>
                <button onclick="showDay(2)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-sm font-medium shadow-sm" id="day-btn-2">D2</button>
                <button onclick="showDay(3)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-sm font-medium shadow-sm" id="day-btn-3">D3</button>
                <button onclick="showDay(4)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-sm font-medium shadow-sm" id="day-btn-4">D4</button>
                <button onclick="showDay(5)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-sm font-medium shadow-sm" id="day-btn-5">D5</button>
                <button onclick="showDay(6)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-sm font-medium shadow-sm" id="day-btn-6">D6</button>
                <button onclick="showDay(7)" class="day-btn flex-shrink-0 px-4 py-2 muji-card text-sm font-medium shadow-sm" id="day-btn-7">D7</button>
            </div>

            <div id="day-content" class="relative pl-8 timeline-line">
                </div>
        </section>

        <section id="guide" class="tab-content">
            <h2 class="text-2xl font-serif font-bold mb-6 text-muji-brown italic">Travel Guide</h2>
            
            <div class="space-y-8">
                <article class="space-y-3">
                    <img src="https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?auto=format&fit=crop&w=800&q=80" class="w-full h-48 object-cover rounded-3xl" alt="Disney">
                    <h3 class="text-xl font-bold">東京迪士尼攻略</h3>
                    <p class="text-sm leading-relaxed text-gray-600">
                        東京迪士尼是全球唯一海洋與陸地雙主題的園區。入園後第一件事務必使用 App 領取 40 週年優先准入 (Priority Pass) 與抽 DPA (Disney Premier Access)。「美女與野獸」是目前的排隊王，建議一開園就衝或直接買 DPA 節省 120 分鐘。
                    </p>
                    <div class="h-40 rounded-2xl overflow-hidden">
                        <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.openstreetmap.org/export/embed.html?bbox=139.878%2C35.626%2C139.888%2C35.636&amp;layer=mapnik"></iframe>
                    </div>
                </article>

                <article class="space-y-3">
                    <img src="https://images.unsplash.com/photo-1524413159693-3b841b6a4db2?auto=format&fit=crop&w=800&q=80" class="w-full h-48 object-cover rounded-3xl" alt="Fuji">
                    <h3 class="text-xl font-bold">河口湖的靜謐時光</h3>
                    <p class="text-sm leading-relaxed text-gray-600">
                        河口湖是富士五湖中交通最便利的。大石公園除了是拍照聖地，冬季雖然沒有薰衣草，但能拍到完整的「逆富士」倒影。注意河口湖溫泉區的接駁巴士通常在下午 5 點左右就會收班。
                    </p>
                </article>
            </div>
        </section>

        <section id="wallet" class="tab-content">
            <div class="muji-card p-6 mb-6 text-center bg-muji-accent text-white">
                <p class="text-xs opacity-80 mb-1">本趟旅行總支出 (日幣)</p>
                <h3 id="total-jpy" class="text-3xl font-bold">¥ 0</h3>
                <p id="total-twd" class="text-sm opacity-90 mt-1">約 TWD 0</p>
            </div>

            <div class="muji-card p-4 mb-6">
                <div class="flex gap-2 mb-4">
                    <input id="calc-input" type="text" placeholder="輸入算式 (如 500+200*3)" class="w-full bg-muji-beige border-none rounded-lg p-3 text-sm focus:ring-2 ring-muji-accent outline-none">
                    <button onclick="calculateRate()" class="bg-muji-brown text-white px-4 py-2 rounded-lg text-sm">換算</button>
                </div>
                <div class="flex justify-between items-center text-sm px-1">
                    <span class="text-gray-400">當前匯率 1 JPY = </span>
                    <input id="exchange-rate" type="number" value="0.21" step="0.001" class="w-16 bg-transparent border-b border-muji-sand text-center focus:outline-none">
                    <span class="text-gray-400">TWD</span>
                </div>
            </div>

            <div class="muji-card p-4 mb-6">
                <h3 class="font-bold text-sm mb-3">新增支出</h3>
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <input id="exp-item" type="text" placeholder="品項" class="bg-muji-beige border-none rounded-lg p-2 text-sm">
                    <input id="exp-amount" type="number" placeholder="金額 (¥)" class="bg-muji-beige border-none rounded-lg p-2 text-sm">
                </div>
                <div class="flex items-center gap-2 mb-3">
                    <label class="bg-muji-sand p-2 rounded-lg cursor-pointer flex-1 text-center text-xs">
                        <i class="fa-solid fa-camera mr-1"></i> 拍照/上傳
                        <input id="exp-img" type="file" accept="image/*" class="hidden" onchange="previewAndCompress(this)">
                    </label>
                    <div id="img-indicator" class="hidden text-xs text-green-600"><i class="fa-solid fa-check"></i> 已就緒</div>
                </div>
                <button onclick="addExpense()" class="w-full bg-muji-accent text-white py-3 rounded-xl font-bold">存入記帳本</button>
            </div>

            <div id="expense-list" class="space-y-3">
                </div>
        </section>

        <section id="lists" class="tab-content">
            <div class="mb-8">
                <h3 class="font-bold text-lg mb-4 text-muji-brown italic">Preparation</h3>
                <div id="checklist" class="space-y-2">
                    </div>
            </div>

            <div class="mb-8">
                <h3 class="font-bold text-lg mb-4 text-muji-brown italic">Notes</h3>
                <textarea id="note-input" rows="5" class="w-full muji-card p-4 text-sm focus:ring-2 ring-muji-accent outline-none mb-2" placeholder="在此輸入備忘錄，包含網址會自動轉連結..."></textarea>
                <div id="note-preview" class="space-y-2"></div>
            </div>
        </section>

        <section id="info" class="tab-content">
            <div class="space-y-6">
                <div class="muji-card p-5">
                    <h3 class="font-bold mb-3 border-b pb-2"><i class="fa-solid fa-cloud-sun mr-2"></i> 實用連結</h3>
                    <div class="flex flex-col gap-3">
                        <a href="https://www.jma.go.jp/jma/index.html" target="_blank" class="text-sm text-blue-600 flex justify-between items-center">
                            日本氣象廳預報 <i class="fa-solid fa-chevron-right text-xs"></i>
                        </a>
                        <a href="https://www.jorudan.co.jp/" target="_blank" class="text-sm text-blue-600 flex justify-between items-center">
                            乘換案內 (交通查詢) <i class="fa-solid fa-chevron-right text-xs"></i>
                        </a>
                    </div>
                </div>

                <div class="muji-card p-5 bg-red-50/50">
                    <h3 class="font-bold text-red-800 mb-3 border-b border-red-100 pb-2"><i class="fa-solid fa-circle-exclamation mr-2"></i> 緊急聯絡</h3>
                    <p class="text-xs mb-2">警察局：110 / 救護車：119</p>
                    <p class="text-xs">台北駐日經濟文化代表處：<br>+81-3-3280-7811</p>
                </div>

                <div class="muji-card p-5">
                    <h3 class="font-bold mb-3 border-b pb-2"><i class="fa-solid fa-ban mr-2"></i> 注意事項</h3>
                    <ul class="text-xs space-y-2 text-gray-500 list-disc pl-4">
                        <li>肉類製品禁止攜帶回台灣。</li>
                        <li>日本搭電扶梯：東京靠左，大阪靠右。</li>
                        <li>餐廳通常不需給小費，結帳大多在櫃台。</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-muji-sand px-6 py-3 flex justify-between items-center z-50">
        <button onclick="switchTab('plan', this)" class="nav-item flex flex-col items-center gap-1 nav-active">
            <i class="fa-solid fa-calendar-day text-xl"></i>
            <span class="text-[10px]">PLAN</span>
        </button>
        <button onclick="switchTab('guide', this)" class="nav-item flex flex-col items-center gap-1 text-gray-400">
            <i class="fa-solid fa-map-location-dot text-xl"></i>
            <span class="text-[10px]">GUIDE</span>
        </button>
        <button onclick="switchTab('wallet', this)" class="nav-item flex flex-col items-center gap-1 text-gray-400">
            <i class="fa-solid fa-wallet text-xl"></i>
            <span class="text-[10px]">WALLET</span>
        </button>
        <button onclick="switchTab('lists', this)" class="nav-item flex flex-col items-center gap-1 text-gray-400">
            <i class="fa-solid fa-clipboard-list text-xl"></i>
            <span class="text-[10px]">LISTS</span>
        </button>
        <button onclick="switchTab('info', this)" class="nav-item flex flex-col items-center gap-1 text-gray-400">
            <i class="fa-solid fa-circle-info text-xl"></i>
            <span class="text-[10px]">INFO</span>
        </button>
    </nav>

    <script>
        // --- Data Definitions ---
        const itinerary = {
            1: {
                title: "12/25 (三) 抵達東京",
                events: [
                    { time: "18:30", text: "抵達成田機場 (NRT)", icon: "plane-arrival" },
                    { time: "19:15", text: "領取 Skyliner 車票", icon: "ticket" },
                    { time: "19:40", text: "成田機場 → 京成 Skyliner (約40分) → 青砥站轉車 → 押上站 (總計約65分)", icon: "train", route: true },
                    { time: "21:00", text: "Check-in 押上住宿", icon: "hotel", location: "3 Chome-4-1 Narihira" },
                    { time: "21:30", text: "晚餐：六厘舍 (沾麵)", icon: "utensils", link: "https://www.google.com/maps/search/Rokurinsha+Oshiage" }
                ]
            },
            2: {
                title: "12/26 (四) 迪士尼",
                events: [
                    { time: "07:45", text: "從押上出發 (半藏門線 ➔ 清澄白河 ➔ 日比谷線 ➔ 八丁堀 ➔ JR京葉線) 約45-50分", icon: "train", route: true },
                    { time: "09:00", text: "東京迪士尼入園 (抽DPA)", icon: "fort-awesome" },
                    { time: "21:00", text: "煙火秀 & 準備回程", icon: "fireworks" },
                    { time: "22:30", text: "回住宿休息", icon: "moon" }
                ]
            },
            3: {
                title: "12/27 (五) 淺草和服 & 銀座",
                events: [
                    { time: "09:00", text: "押上 ➔ 淺草站 (都營淺草線 3分)", icon: "train", route: true },
                    { time: "10:00", text: "淺草愛和服 3 號店", icon: "shirt" },
                    { time: "13:00", text: "午餐：淺草今半 (需預約)", icon: "utensils" },
                    { time: "14:30", text: "小綱神社 (強運神社)", icon: "shrine" },
                    { time: "16:00", text: "銀座購物區 (MUJI, LOFT, Uniqlo)", icon: "bag-shopping" },
                    { time: "19:30", text: "晚餐：花山うどん", icon: "utensils" }
                ]
            },
            4: {
                title: "12/28 (六) 前往富士山",
                events: [
                    { time: "08:30", text: "新宿站寄物", icon: "box-archive" },
                    { time: "10:00", text: "新宿巴士總站 ➔ 河口湖 (高速巴士 2小時)", icon: "bus", route: true },
                    { time: "12:00", text: "抵達河口湖 / 午餐：不動茶屋", icon: "utensils" },
                    { time: "14:00", text: "天上山公園纜車", icon: "mountain" },
                    { time: "16:30", text: "河口湖自然生活館 (大石公園)", icon: "camera" },
                    { time: "18:00", text: "入住河口湖 Asakawa 180-1", icon: "hotel" }
                ]
            },
            5: {
                title: "12/29 (日) 富士山探索",
                events: [
                    { time: "09:10", text: "河口湖站 ➔ 下吉田站", icon: "train" },
                    { time: "09:40", text: "新倉富士淺間神社 (五重塔)", icon: "camera" },
                    { time: "11:00", text: "本町二丁目商店街 (富士山街景)", icon: "shop" },
                    { time: "16:00", text: "高速巴士回新宿", icon: "bus", route: true },
                    { time: "18:30", text: "晚餐：新宿燒肉 Bondz", icon: "utensils", link: "https://share.google/EdNQf3suyG5gGVilQ" },
                    { time: "21:30", text: "新小岩站 Check-in", icon: "hotel" }
                ]
            },
            6: {
                title: "12/30 (一) 購物 & 澀谷夜景",
                events: [
                    { time: "10:00", text: "上野 (二木之菓子、唐吉訶德)", icon: "bag-shopping" },
                    { time: "12:30", text: "午餐：山家炸豬排", icon: "utensils" },
                    { time: "14:00", text: "Shibuya Sky 澀谷天空", icon: "mountain-sun" },
                    { time: "18:00", text: "澀谷周邊購物 / 哥吉拉商店", icon: "dragon" },
                    { time: "20:00", text: "晚餐：鰻富士 (炭燒)", icon: "utensils" }
                ]
            },
            7: {
                title: "12/31 (二) 回家",
                events: [
                    { time: "11:00", text: "退房 & 新小岩早午餐", icon: "coffee" },
                    { time: "14:30", text: "出發前往成田機場 (約1小時)", icon: "train", route: true },
                    { time: "15:30", text: "機場免稅店最後採買", icon: "cart-shopping" },
                    { time: "19:30", text: "CI109 起飛", icon: "plane-departure" },
                    { time: "22:45", text: "抵達桃園機場", icon: "house-chimney" }
                ]
            }
        };

        const checklistItems = ["護照", "日幣現金", "網卡/Wifi機", "行動電源", "保暖外套", "Visit Japan Web QR Code", "轉接頭 (日本與台灣同，視情況)", "休足時間"];

        // --- Core Functions ---

        // Tab Switching
        function switchTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active-tab'));
            document.getElementById(tabId).classList.add('active-tab');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('nav-active'));
            el.classList.add('nav-active');
            window.scrollTo(0,0);
        }

        // Itinerary Rendering
        function showDay(dayNum) {
            const content = document.getElementById('day-content');
            const data = itinerary[dayNum];
            
            // Update buttons
            document.querySelectorAll('.day-btn').forEach(b => {
                b.classList.remove('bg-muji-accent', 'text-white');
            });
            document.getElementById(`day-btn-${dayNum}`).classList.add('bg-muji-accent', 'text-white');

            let html = `<h3 class="text-sm font-bold text-muji-accent mb-6 tracking-widest uppercase">${data.title}</h3>`;
            
            data.events.forEach(ev => {
                html += `
                <div class="mb-8 relative">
                    <div class="absolute -left-[27px] top-1 w-3 h-3 bg-muji-accent rounded-full border-2 border-white shadow-sm"></div>
                    <div class="flex flex-col gap-1">
                        <span class="text-xs font-bold text-muji-brown">${ev.time}</span>
                        <div class="muji-card p-3 ${ev.route ? 'bg-muji-sand/30' : ''}">
                            <div class="flex items-start gap-3">
                                <i class="fa-solid fa-${ev.icon} mt-1 text-muji-accent"></i>
                                <div class="flex-1 text-sm">
                                    <p class="${ev.route ? 'font-medium italic text-muji-brown' : 'font-medium'}">${ev.text}</p>
                                    ${ev.location ? `<p class="text-[10px] text-gray-400 mt-1"><i class="fa-solid fa-location-dot"></i> ${ev.location}</p>` : ''}
                                    <div class="flex gap-2 mt-2">
                                        ${ev.location ? `<a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ev.location)}" class="text-[10px] bg-white border border-muji-sand px-2 py-1 rounded-md">地圖</a>` : ''}
                                        ${ev.link ? `<a href="${ev.link}" target="_blank" class="text-[10px] bg-white border border-muji-sand px-2 py-1 rounded-md text-muji-accent font-bold">查看食記</a>` : ''}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            });
            content.innerHTML = html;
        }

        // Wallet Logic
        let expenses = JSON.parse(localStorage.getItem('trip_expenses')) || [];
        let currentBase64 = null;

        function previewAndCompress(input) {
            const file = input.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const maxW = 200;
                    const scale = maxW / img.width;
                    canvas.width = maxW;
                    canvas.height = img.height * scale;
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    currentBase64 = canvas.toDataURL('image/jpeg', 0.6);
                    document.getElementById('img-indicator').classList.remove('hidden');
                }
                img.src = e.target.result;
            }
            reader.readAsDataURL(file);
        }

        function calculateRate() {
            const input = document.getElementById('calc-input').value;
            const rate = parseFloat(document.getElementById('exchange-rate').value);
            try {
                // Basic math evaluation safely
                const jpy = eval(input.replace(/[^0-9+\-*/().]/g, ''));
                const twd = Math.round(jpy * rate);
                alert(`結果: ¥${jpy} ≈ TWD ${twd}`);
                document.getElementById('exp-amount').value = jpy;
            } catch(e) { alert("請輸入正確算式"); }
        }

        function addExpense() {
            const item = document.getElementById('exp-item').value;
            const amount = parseFloat(document.getElementById('exp-amount').value);
            if(!item || !amount) return;
            
            const exp = {
                id: Date.now(),
                item,
                amount,
                img: currentBase64,
                date: new Date().toLocaleDateString()
            };
            expenses.unshift(exp);
            saveAndRenderExpenses();
            // Clear inputs
            document.getElementById('exp-item').value = '';
            document.getElementById('exp-amount').value = '';
            document.getElementById('img-indicator').classList.add('hidden');
            currentBase64 = null;
        }

        function saveAndRenderExpenses() {
            localStorage.setItem('trip_expenses', JSON.stringify(expenses));
            const list = document.getElementById('expense-list');
            const rate = parseFloat(document.getElementById('exchange-rate').value);
            let total = 0;
            
            list.innerHTML = expenses.map(ex => {
                total += ex.amount;
                return `
                <div class="muji-card p-3 flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        ${ex.img ? `<img src="${ex.img}" class="img-preview" />` : `<div class="w-[60px] h-[60px] bg-muji-beige rounded-lg flex items-center justify-center text-xs text-gray-300">No Pix</div>`}
                        <div>
                            <p class="font-bold text-sm">${ex.item}</p>
                            <p class="text-[10px] text-gray-400">${ex.date}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-bold text-mu_brown">¥ ${ex.amount}</p>
                        <p class="text-[10px] text-gray-400">≈ $${Math.round(ex.amount * rate)}</p>
                        <button onclick="deleteExpense(${ex.id})" class="text-[10px] text-red-300 mt-1">刪除</button>
                    </div>
                </div>`;
            }).join('');
            
            document.getElementById('total-jpy').innerText = `¥ ${total.toLocaleString()}`;
            document.getElementById('total-twd').innerText = `約 TWD ${Math.round(total * rate).toLocaleString()}`;
        }

        function deleteExpense(id) {
            expenses = expenses.filter(e => e.id !== id);
            saveAndRenderExpenses();
        }

        // Lists Logic
        let checkedItems = JSON.parse(localStorage.getItem('trip_checklist')) || [];
        function initChecklist() {
            const container = document.getElementById('checklist');
            container.innerHTML = checklistItems.map((item, idx) => `
                <div class="flex items-center gap-3 muji-card px-4 py-3 cursor-pointer" onclick="toggleCheck(${idx})">
                    <i class="fa-solid ${checkedItems.includes(idx) ? 'fa-circle-check text-green-500' : 'fa-circle text-gray-200'}"></i>
                    <span class="text-sm ${checkedItems.includes(idx) ? 'line-through text-gray-300' : ''}">${item}</span>
                </div>
            `).join('');
        }

        function toggleCheck(idx) {
            if(checkedItems.includes(idx)) checkedItems = checkedItems.filter(i => i !== idx);
            else checkedItems.push(idx);
            localStorage.setItem('trip_checklist', JSON.stringify(checkedItems));
            initChecklist();
        }

        function initNotes() {
            const input = document.getElementById('note-input');
            const preview = document.getElementById('note-preview');
            const saved = localStorage.getItem('trip_notes') || '';
            input.value = saved;
            
            const render = (val) => {
                const urlRegex = /(https?:\/\/[^\s]+)/g;
                preview.innerHTML = val.split('\n').map(line => {
                    if(!line.trim()) return '';
                    const linkedLine = line.replace(urlRegex, (url) => `<a href="${url}" target="_blank" class="inline-block bg-muji-accent text-white px-2 py-0.5 rounded text-[10px] ml-1">點擊連結 <i class="fa-solid fa-up-right-from-square"></i></a>`);
                    return `<div class="text-xs p-2 bg-white rounded-lg shadow-sm">${linkedLine}</div>`;
                }).join('');
            };

            input.oninput = (e) => {
                localStorage.setItem('trip_notes', e.target.value);
                render(e.target.value);
            };
            render(saved);
        }

        // Initialize Everything
        window.onload = () => {
            document.getElementById('header-date').innerText = new Date().toLocaleDateString();
            showDay(1);
            saveAndRenderExpenses();
            initChecklist();
            initNotes();
        };
    </script>
</body>
</html>